(function(){angular.module("rant_that",["restangular","ngResource","rant_that.services","rant_that.directives","rant_that.controllers"]).config(["$routeProvider","RestangularProvider","$httpProvider",function(a,b,c){return console.log("hi"),b.setBaseUrl("http://ticknardif.pagekite.me"),c.defaults.useXDomain=!0,delete c.defaults.headers.common["X-Requested-With"],a.when("/",{templateUrl:"./feed.html",controller:"IndexCtrl"}).when("/user/:userId",{templateUrl:"./user.html",controller:"LoginCtrl"})}]).run(["$rootScope","Restangular","$http",function(a){return console.log("hey"),a.map=!0,a.geo=[],a.$on("toggleMap",function(b,c){return console.log("rs- toggleMap"),console.log(c),a.map=c}),a.$on("addGeo",function(b,c){return console.log(c),console.log("ADD GEO YO"),a.geo.push(c)}),a.$watch("geo",function(b,c){return console.log("WATCH GEO"),a.geo=c})}]),angular.module("rant_that.directives",[]),angular.module("rant_that.directives").directive("rtMap",[function(){return{template:'<div id="map-canvas"></div>',scope:{geo:"=geo"},restrict:"A",link:function(a){var b,c,d;return c=new google.maps.Map(document.getElementById("map-canvas")),d=[],$(function(){return google.maps.event.addDomListener(window,"load",b)}),a.$on("geo",function(a,b){return console.log(b)}),a.$watch("geo",function(b,c){return a.geo=c,console.log("geo new")}),b=function(){var a,b,e,f,g,h,i,j;for(a=[{latitude:29.9667,longitude:-90.05,community_resource:!0},{latitude:29.9242,longitude:-90.0123,community_resource:!1},{latitude:29.90534,longitude:-90.2234,community_resource:!1},{latitude:29.7234,longitude:-90.1343,community_resource:!0},{latitude:29.82645,longitude:-90.093432,community_resource:!0}],f={zoom:9,center:new google.maps.LatLng(29.9667,-90.05),mapTypeId:google.maps.MapTypeId.ROADMAP},c.setOptions(f),j=[],e=h=0,i=a.length;i>h;e=++h)b=a[e],d[e]=new google.maps.Marker,g={map:c,position:new google.maps.LatLng(b.latitude,b.longitude),title:"Hello World!",animation:google.maps.Animation.DROP},d[e].setOptions(g),j.push(console.log(d[e]));return j}}}}]),angular.module("rant_that.directives").directive("rtPost",[function(){return{template:'<form id="post-story">\n	<div class="post">\n		<input name="subject" type="text" placeholder="Subject Line..."/>\n		<textarea placeholder="Enter message here..."></textarea>\n		<div class="post-options">\n			<i class="icon-compass"></i><i class="icon-image"></i>\n			<button class="btn btn--primary" id="send_post" ng-click="post()">Rant That</button>\n		</div>\n	</div>\n</form>',restrict:"A",link:function(a){var b,c;return console.log(a),b={},c=Math.floor(100*Math.random()+1),a.post=function(){var d,e,f,g,h,i;return g=$('.post input[name="subject"]').val(),f=$(".post textarea").val(),e=new Date,h=2,i="Fabiola",d=!1,b={user:h,username:i,subject:g,story_text:f,time:e,community_resource:d,happy_count:0,heart_count:0,laughing_count:0,sad_count:0,story_id:c++,upvoteCount:0},""!==g&&""!==f&&a.$broadcast("postStory",b),$('.post input[name="subject"]').val(""),$(".post textarea").val("")}}}}]),angular.module("rant_that.directives").directive("rtFeed",[function(){return{template:'<ul>\n	<li ng-repeat="story in stories | orderBy: \'time\':true">\n		<div class="user_pic">\n			<img src="public/img/fabiola.jpg"></img>\n			<a href="#/user/{{story.user_id}}" class="name">{{story.username}}</a>\n		</div>\n		<div class="feed_post">\n			<div class="feed_post-subject">\n				<h2>{{story.subject}}</h2>\n				<span ng-show="story.community_resource" class="badge commresource">community resource</span>\n				<br/>\n				<span class="timestamp">posted at {{story.time | date:\'shortTime\'}} on {{story.time | date:\'mediumDate\'}}</span>\n			</div>\n			<div class="feed_post-story">\n				<p>{{story.story_text}}</p>\n				<ul class="hashtags">\n					<li class="hashtag" ng-repeat="hashtag in story.hashtags">{{hashtag}}</li>\n				</ul>\n			</div>\n			<div class="feed_post-icons">\n				<i class="icon-heart" ng-click="upHeart(story)"></i>{{story.heart_count}}\n				<i class="icon-smiley" ng-click="upHappy(story)"></i>{{story.happy_count}}\n				<i class="icon-sad" ng-click="upSad(story)"></i>{{story.sad_count}}\n				<i class="icon-grin" ng-click="upLaughing(story)"></i>{{story.laughing_count}}\n			</div>\n		</div>\n		<div class="comments">\n\n\n		<div>\n	</li>\n\n</ul>',scope:{stories:"=stories"},restrict:"A",link:function(a){var b;return b=function(){return console.log("post story")},a.$on("changedstories",function(b,c){return console.log("over here"),a.stories=c}),a.upHeart=function(b){var c,d,e,f,g;if(console.log(b.upvoteCount),0===b.upvoteCount)for(g=a.stories,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d.story_id===b.story_id)return a.stories[c].heart_count=a.stories[c].heart_count+1,a.stories[c].upvoteCount=a.stories[c].upvoteCount+1,!0},a.upHappy=function(b){var c,d,e,f,g;if(0===b.upvoteCount)for(g=a.stories,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d.story_id===b.story_id)return a.stories[c].happy_count=a.stories[c].happy_count+1,a.stories[c].upvoteCount=a.stories[c].upvoteCount+1,!0},a.upSad=function(b){var c,d,e,f,g;if(0===b.upvoteCount)for(g=a.stories,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d.story_id===b.story_id)return a.stories[c].sad_count=a.stories[c].sad_count+1,a.stories[c].upvoteCount=a.stories[c].upvoteCount+1,!0},a.upLaughing=function(b){var c,d,e,f,g;if(0===b.upvoteCount)for(g=a.stories,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d.story_id===b.story_id)return a.stories[c].laughing_count=a.stories[c].laughing_count+1,a.stories[c].upvoteCount=a.stories[c].upvoteCount+1,!0}}}}]),angular.module("rant_that.controllers",[]),angular.module("rant_that.controllers").controller("LoginCtrl",["$scope","$rootScope","$templateCache","$http",function(a,b,c,d){return a.map=!1,console.log("login ctrl"),a.stories=b.stories,a.$watch("stories",function(b,c){return a.stories=c}),a.$emit("toggleMap",!1),a.userId=window.location.hash.slice(7),d({method:"GET",url:"http://ticknardif.pagekite.me/users/"+a.userId,cache:c}).success(function(b){return a.user={username:b.username,age:b.age,gender:b.gender}}).error(function(){return console.log("error")})}]),angular.module("rant_that.controllers").controller("IndexCtrl",["$scope","$rootScope","Restangular","$http","$templateCache",function(a,b,c,d,e){var f,g;return g=function(){var a;return a=$(window).height()-360,$(".l-feed").css({height:""+a+"px"})},$(function(){return g(),$(window).on("resize",g),$("#send_post").on("click",f)}),console.log("index ctrl"),a.stories=[],a.geo=[],a.map=!0,a.$on("postStory",function(b,c){return a.stories.push(c),a.$broadcast("changedstories",a.stories)}),a.$watch("stories",function(b,c){return console.log("changed story"),console.log(b),console.log(c),a.stories=c}),a.$watch("geo",function(b,c){return console.log(b),console.log(c),a.geo=c}),d({method:"GET",url:"http://ticknardif.pagekite.me/stories/",cache:e}).success(function(b){var c,d,e,f,g;if(console.log(b),b.items){for(console.log(b.items),g=b.items,c=e=0,f=g.length;f>e;c=++e)d=g[c],a.stories.push({user:d.user_id,username:d.username,subject:d.subject,story_text:d.story_text,time:new Date(d.posted_time),latitude:d.lat,longitude:d.lng,community_resource:d.community_resource,happy_count:d.happy_count,heart_count:d.heart_count,laughing_count:d.laughing_count,sad_count:d.sad_count,story_id:d.story_id,upvoteCount:0,user_id:d.user_id,hashtags:d.hash_tags.split(",")}),a.geo.push({latitude:d.lat,longitude:d.lng});return a.$broadcast("geo",a.geo)}return console.log(b),a.stories.push({user:b.user_id,username:d.username,subject:b.subject,story_text:b.story_text,time:b.posted_time,latitude:b.lat,longitude:b.lng,community_resource:b.community_resource,happy_count:b.happy_count,heart_count:b.heart_count,laughing_count:b.laughing_count,sad_count:b.sad_count,story_id:b.story_id,upvoteCount:0,user_id:b.user_id}),a.geo.push({latitude:b.lat,longitude:b.lng}),a.$emit("geo",a.geo)}).error(function(){return console.log("error")}),d({method:"DELETE",url:"http://ticknardif.pagekite.me/api/stories/5",cache:e}).success(function(a,b,c){return console.log(a),console.log(b),console.log(c)}).error(function(){return console.log("error")}),f=function(){return console.log($('.post input[name="subject"]').value())}}]),angular.module("rant_that.services",[])}).call(this);